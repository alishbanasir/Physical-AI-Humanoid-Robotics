{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Isaac ROS Example Schema",
  "description": "JSON schema for Isaac ROS perception examples in Module 3 Chapter 2",
  "type": "object",
  "required": ["id", "title", "type", "difficulty", "files", "readme", "testing_criteria", "performance_targets"],
  "properties": {
    "id": {
      "type": "string",
      "pattern": "^[0-9]{2}-.+$"
    },
    "title": {
      "type": "string",
      "minLength": 10
    },
    "type": {
      "type": "string",
      "enum": ["isaac_ros"]
    },
    "difficulty": {
      "type": "string",
      "enum": ["beginner", "intermediate", "advanced"]
    },
    "files": {
      "type": "object",
      "required": ["launch", "yaml"],
      "properties": {
        "launch": {
          "type": "array",
          "minItems": 1,
          "items": {
            "type": "object",
            "required": ["path", "description"],
            "properties": {
              "path": {"type": "string", "pattern": "\\.launch\\.py$"},
              "description": {"type": "string"}
            }
          }
        },
        "yaml": {
          "type": "array",
          "minItems": 1,
          "items": {
            "type": "object",
            "required": ["path", "description"],
            "properties": {
              "path": {"type": "string", "pattern": "\\.(yaml|yml)$"},
              "description": {"type": "string"}
            }
          }
        },
        "rviz": {
          "type": "array",
          "items": {
            "type": "object",
            "required": ["path", "description"],
            "properties": {
              "path": {"type": "string", "pattern": "\\.rviz$"},
              "description": {"type": "string"}
            }
          }
        },
        "docker": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "dockerfile": {"type": "string"},
              "docker_compose": {"type": "string"}
            }
          }
        }
      }
    },
    "readme": {
      "type": "object",
      "required": ["prerequisites", "installation_steps", "execution_steps", "expected_output", "troubleshooting"],
      "properties": {
        "prerequisites": {
          "type": "object",
          "required": ["software", "hardware"],
          "properties": {
            "software": {"type": "array", "minItems": 1, "items": {"type": "string"}},
            "hardware": {"type": "array", "minItems": 1, "items": {"type": "string"}}
          }
        },
        "installation_steps": {"type": "array", "minItems": 1, "items": {"type": "string"}},
        "execution_steps": {"type": "array", "minItems": 1, "items": {"type": "string"}},
        "expected_output": {
          "type": "object",
          "required": ["description", "ros2_topics", "success_criteria"],
          "properties": {
            "description": {"type": "string"},
            "ros2_topics": {
              "type": "array",
              "minItems": 1,
              "items": {
                "type": "object",
                "required": ["topic", "message_type", "expected_rate"],
                "properties": {
                  "topic": {"type": "string", "pattern": "^/"},
                  "message_type": {"type": "string"},
                  "expected_rate": {"type": "string"}
                }
              }
            },
            "success_criteria": {"type": "array", "minItems": 1, "items": {"type": "string"}}
          }
        },
        "troubleshooting": {
          "type": "array",
          "minItems": 1,
          "items": {
            "type": "object",
            "required": ["symptom", "cause", "solution"],
            "properties": {
              "symptom": {"type": "string"},
              "cause": {"type": "string"},
              "solution": {"type": "string"}
            }
          }
        }
      }
    },
    "testing_criteria": {
      "type": "array",
      "minItems": 1,
      "items": {
        "type": "object",
        "required": ["criterion", "validation_method"],
        "properties": {
          "criterion": {"type": "string"},
          "validation_method": {"type": "string"}
        }
      }
    },
    "performance_targets": {
      "type": "object",
      "properties": {
        "stereo_depth_fps": {"type": "integer", "minimum": 30},
        "vslam_latency_ms": {"type": "integer", "maximum": 50},
        "dnn_inference_fps": {"type": "integer", "minimum": 30}
      }
    }
  }
}
